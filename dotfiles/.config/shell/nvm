# NVM (Node Version Manager) - Fast Loading

# Install nvm if not present
if [[ ! -d "$HOME/.nvm" ]]; then
    echo "Installing nvm..."
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
fi

# Set NVM directory
export NVM_DIR="$HOME/.nvm"

# Fast loading - only load when explicitly needed
if [[ -s "$NVM_DIR/nvm.sh" ]]; then
    # Add nvm to PATH for faster access
    export PATH="$NVM_DIR:$PATH"
    
    # Alias for manual loading when needed
    alias load-nvm='source "$NVM_DIR/nvm.sh" && source "$NVM_DIR/bash_completion"'
    
    # Auto-load on first use
    nvm() {
        unset -f nvm
        source "$NVM_DIR/nvm.sh"
        [[ -s "$NVM_DIR/bash_completion" ]] && source "$NVM_DIR/bash_completion"
        nvm "$@"
    }
fi